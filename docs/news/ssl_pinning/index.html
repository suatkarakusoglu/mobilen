<!-- Generated from 4b2bd52 on 2023-10-02 @ 12:46 with Emacs 30.0.50 (Org mode 9.6.8) -->
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="Mobilen - Suat Karakuşoğlu"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="icon" type="image/png" href="/img/favicon.png"/><link rel="alternative" type="application/rss+xml" title="Mobilen Yazılar" href="https://mobilen.art/rss/news.xml"/><link rel="stylesheet" href="https://mobilen.art/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="https://mobilen.art/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="https://mobilen.art/css/code.css"/><link rel="stylesheet" href="https://mobilen.art/css/site.css"/><link rel="stylesheet" href="https://mobilen.art/css/code_highlighter_dark_theme.css"/><title>SSL Pinning - Mobilen</title></head><body><header class="site-header"><div class="container"><div class="site-title"><h1>Mobilen</h1></div></div><div class="site-masthead"><div class="container"><nav class="nav"><a class="nav-link" href="/">Anasayfa</a> <a class="nav-link" href="/magazines/">Dergiler</a> <a class="nav-link" href="/news/">İçerikler</a> <a class="nav-link" href="/community/">Topluluk</a> <a class="nav-link" href="https://mobilen.art/rss/">RSS</a> </nav></div></div></header><div class="container"><div class="site-post"><h1 class="site-post-title">SSL Pinning</h1><a class="tag" href="https://mobilen.art/tags/ios/">iOS #17</a><a class="tag" href="https://mobilen.art/tags/yazılım/">Yazılım #20</a><a class="tag" href="https://mobilen.art/tags/güvenlik/">Güvenlik #1</a><p class="site-post-meta">August  8, 2023</p><div id="content"><p>
<a href="https://tr.linkedin.com/in/suat-karakusoglu">Suat Karakuşoğlu</a> yazdı.
</p>

<h2><a id="i̇çerik" class="anchor" href="#i̇çerik">¶</a>İçerik</h2><div class="outline-text-2" id="text-orga46be2a">

<div id="org1b3ad71" class="figure">
<p><img src="/img/ssl_and_pinning_certificate_topology.jpg" class="content-image" width="100%">
</p>
<p><span class="figure-number">Figure 1: </span><a href="https://docs.wavemaker.com/learn/blog/2020/12/15/certificate-pinning/">SSL Pinleme</a></p>
</div>

<p>
Merhabalar, bu yazımızda güvenliğe dokunan bir konudan bahsedeceğiz. Verinin güvenliği akış halinde, işlenirken veya saklanırken farklı yöntemler ile sağlanmakta.
</p>

<p>
SSL Pinning verinin iki parti arasında iletim esnasındaki güvenliğini korumak için ortaya çıkmıştır. <code>SSL Pinning</code> dediğimizde iki kavram var birisi <code>SSL</code> diğeri ise <code>Pinning</code> işlemi. O nedenle ilk önce SSL hakkında ufak bir bilgi ile başlayalım.
</p>
</div>

<h3><a id="sslrsquoin-kısa-tarihçesi" class="anchor" href="#sslrsquoin-kısa-tarihçesi">¶</a>SSL&rsquo;in Kısa tarihçesi</h3><div class="outline-text-3" id="text-org7bb7780">
<p>
Güvenli Geçiş Katmanları diye türkçeleştirebileceğimiz bir tabir olan SSL websitelerinin doğması ile beraber 1990&rsquo;ların ortasında bağlanılan sitelerin güvenliğini teyit etmek için kullandığı bir güvenlik yöntemidir.
</p>

<p>
Burada <code>istemci (client)</code> <code>ssl</code> sayesinde <code>sunucu (server)</code> ile arasında olan iletişimi geçerli bir sertifikaya güvenerek yapmaktadır.
</p>

<p>
Sertifika otoritelerinin (CA Authorities) verdiği sertifikalar ile (chain of certificate) üzerinden bu sağlanmaktadır. Ancak herhangi kötü niyetli birileride geçerli sertifikalara sahip olabilir; o nedenle bu riski düşürebilmek adına ilgili sertifikalar her iki partide (istemci/sunucu) önceden bulunarak, bağlantının gerçekten doğru istemci ve doğru sunucu ile olduğunu garantiler.
</p>
</div>

<h3><a id="mi̇tm-man-in-the-middle-atağı" class="anchor" href="#mi̇tm-man-in-the-middle-atağı">¶</a>MİTM (Man in the Middle) Atağı</h3><div class="outline-text-3" id="text-org978e796">
<p>
SSL&rsquo;in eksik kaldığı noktada kötü niyetli birinin de sertifika sahibi olduğunda istemci ve sunucu arasında zaafiyet meydana gelebilir. İletişim&rsquo;in ortasına kendisini yerleştirip ortamı dinleyerek bilgi elde etmeye çalışan atak türüdür.
</p>
</div>

<h3><a id="pinning-pinlemek-nedir" class="anchor" href="#pinning-pinlemek-nedir">¶</a>Pinning (Pinlemek) nedir?</h3><div class="outline-text-3" id="text-org11d4468">
<p>
Pinlemenin ne olduğunu öğrenmeden önce neyi pinleyeceğimizden biraz bahsedelim.
Pinlenecek olan dosyaya Sertifika (Certificate) diyoruz.
</p>

<p>
Asimetrik şifrelemedeki Public/Private anahtar çiftleri, sertifika için önemli kavramlar.
<code>Public Key</code> sunucuya gönderilecek olan bilgiyi başkaları okumasın diye şifrelemede kullanılıyor.
Bu <code>public key</code> sertifikanın içinde bulunuyor ve istemci tarafında kullanılıyor.
Private anahtar ise gönderilen veriyi sunucuda çözümleyebilmek için kullanılıyor.
</p>

<p>
Zaten <code>https</code> üzerinden bu bilgiler güvenli şekilde iletiliyorken neden pinlemeye ihtiyaç duyuluyor sorusunun cevaplayalım.
</p>

<p>
Normalde sertifikalar &ldquo;Certificate of Chain&rdquo; denilen bir zincir üzerinden iletişimi güvenli hale getiriyor. O nedenle tüm zincir <code>root</code> sertifikaya kadar onaylandıktan sonra iki parti arasında iletişim başlayabiliyor. Ama, uygulama sunucunun verdiği sertifikaya güvenirken bu sertifikanın kendi sunucusu mu yoksa bir başkasının sunucusu mu olduğuna dair bilgiye sahip değildir.
</p>

<p>
Pinleme yaptığınız vakit ise direkt olarak bu iletişim garantisini istemci/sunucu arasında karşılıklı güvenli hale getirebiliyorsunuz; herhangi bir başka otoriteye gerek duymuyorsunuz.
</p>

<p>
Önceden istemciye gömülen sunucunun <code>public</code> anahtarı olursa, istemci sunucuyla iletişim kurmadan önce kendisinde olan anahtar ile sunucudaki anahtarı karşılaştırıp, eşleş*meme*si durumunda direkt iletişimi kesiyor.
</p>

<p>
Özellikle güvenliğin daha temelde olduğu uygulamalarda bankacılık ve finansal enstrüman olarak görev yapan uygulamalarda bu güvenlik önlemi tercih edilmektedir. Mobil uygulamalarda da yoğunluklu olarak kullanılan bir güvenlik tedbiridir.
</p>
</div>

<h3><a id="mobil-uygulama-entegrasyonları" class="anchor" href="#mobil-uygulama-entegrasyonları">¶</a>Mobil Uygulama Entegrasyonları</h3><div class="outline-text-3" id="text-orgda733c5">
<ol class="org-ol">
<li>İlk adım olarak sunucunun <code>public</code> anahtarini veya SSL sertifikasını çıkarmanız gerekiyor.</li>

<li>Bu anahtara sahip sertifikayı veya public anahtarı istemci uygulamaya pinlemek/gömmek gerekiyor. İstemci tarafındaki network katmanında <code>sunucuya</code> isteklerinde bu anahtarların eşleşme kontrolünü yapacak kontrolü eklemek gerekiyor.</li>

<li>Dikkat edilmesi gereken en önemli noktalardan bir tanesi sertifikanın süresi bittiğinde yenileme ihtiyacını takip edebilmek.
<dl class="org-dl">
<dt>Certificate Pinning</dt><dd>Tüm sertifikanın <code>client</code>&rsquo;a gömüldüğü ve sorguya cevap veren <code>server</code>&rsquo;in sertifikası ile karşılaştırıldığı pinleme yöntemi.
Bu durumda <code>client</code>&rsquo;ların eski kalanlarının <code>force update</code> ile zorunlu güncellemeye gitmesi gerekiyor.</dd>

<dt>Public Key Pinning</dt><dd><p>
Sertifika&rsquo;da yer alan <code>public key</code>&rsquo;in veya <code>public key hash</code>&rsquo;inin istemciye konulması ve karşılaştırma için kullanılması durumunu ifade eder.
Normalde sertifikaların belli periyotlarda yenilenmesi gerekmektedir. Bu yenileme herhangi bir private key sızıntısı durumlarının önüne geçmeyi amaçlar.
</p>

<p>
Public anahtarı pinlediğimiz takdirde istersek eski <code>public/private</code> anahtar çifti ile yeni sertifika oluşturabiliriz.
Public Key pinleme ise bu durumda sunucu tarafında sertifika değişimlerinde yeni sertifika eski public/private key pair ile üretildiği durumda force update gerekmeden devam edilebilir. Ancak böyle devam etmesi sertifikanın yenilenme amacına aykırı olmaktadır.
</p></dd>
</dl></li>
</ol>

<p>
Özet olarak, <code>SSL Pinning</code> dediğimiz olay istemci ile sunucu arasındaki iletişimi önceden belirlenen anahtar çifti ile dışarıya sızmasını engelleyen yöntemdir.
</p>

<p>
Sistem güvenliği konusunda araştırmalar yapan bağımsız kuruluş <a href="https://owasp.org/">OWASP</a>, <a href="https://tr.wikipedia.org/wiki/Man-in-the-middle_sald%C4%B1r%C4%B1s%C4%B1">MITM</a> türü ataklar için önlem olarak bu yöntemi tavsiye etmektedir.
</p>

<p>
iOS tarafında <code>NSURLSession</code> veya <code>Alamofire</code> bağımlılıkları üzerinde <a href="https://medium.com/@greenSyntax/ssl-pinning-in-ios-f508b5860ead">bu pratikler</a> rahatlıkla uygulanabiliyor.
</p>

<p>
Android tarafında ise OKHttpClient ve Retrofit gibi popüler kütüphanelerde bu pratiklerin nasıl yapıldığına dair birçok <a href="https://medium.com/@eniz.bilgin/android-ssl-certificate-pinning-7fd236243f2b">örnek</a> bulabilirsiniz.
</p>
</div>

<h3><a id="kaynakça" class="anchor" href="#kaynakça">¶</a>Kaynakça</h3><div class="outline-text-3" id="text-orgc734042">
<ul class="org-ul">
<li><a href="https://owasp.org/www-community/controls/Certificate_and_Public_Key_Pinning">OWASP SSL Pinleme</a></li>
<li><a href="https://mas.owasp.org/MASTG/">OWASP Mobil Uygulama Güvenlik Test Kitabı</a></li>
<li><a href="https://docs.wavemaker.com/learn/blog/2020/12/15/certificate-pinning/">Certificate Pinning</a></li>
</ul>
</div>
</div></div></div><footer class="site-footer"><div class="container"><div class="row"><div class="column"><p><a href="https://mobilen.art/rss/">RSS Bülteni</a> · <a href="https://mobilen.art/credits/">Atıflar</a> · <a rel="me" href="https://tr.linkedin.com/in/suat-karakusoglu">s13u</a></p><p>© 2023-2024 Mobilen</p></div><div class="column align-right"><p><a href="https://github.com/suatkarakusoglu/mobilen"><img src="https://mobilen.art/img/site_github_icon.png" style="width: 80px" alt="Github'da Katkıda Bulun"/></a></p></div></div></div><div class="container"><div class="row site-footer-tags"><a class="tag" href="https://mobilen.art/tags/yazılım/">Yazılım #20</a><a class="tag" href="https://mobilen.art/tags/ios/">iOS #17</a><a class="tag" href="https://mobilen.art/tags/araçlar/">Araçlar #6</a><a class="tag" href="https://mobilen.art/tags/android/">Android #6</a><a class="tag" href="https://mobilen.art/tags/kitap/">Kitap #4</a><a class="tag" href="https://mobilen.art/tags/xcode/">Xcode #3</a><a class="tag" href="https://mobilen.art/tags/terminal_komutları/">Terminal Komutları #3</a><a class="tag" href="https://mobilen.art/tags/android_studio/">Android Studio #3</a><a class="tag" href="https://mobilen.art/tags/wwdc/">WWDC #2</a><a class="tag" href="https://mobilen.art/tags/tasarım/">Tasarım #2</a><a class="tag" href="https://mobilen.art/tags/apple/">Apple #2</a><a class="tag" href="https://mobilen.art/tags/tüyo/">Tüyo #2</a><a class="tag" href="https://mobilen.art/tags/belgesel/">Belgesel #1</a><a class="tag" href="https://mobilen.art/tags/güvenlik/">Güvenlik #1</a><a class="tag" href="https://mobilen.art/tags/biyografi/">Biyografi #1</a><a class="tag" href="https://mobilen.art/tags/swiftui/">SwiftUI #1</a><a class="tag" href="https://mobilen.art/tags/ürün_yönetimi/">Ürün Yönetimi #1</a><a class="tag" href="https://mobilen.art/tags/flutter/">Flutter #1</a><a class="tag" href="https://mobilen.art/tags/ai/">AI #1</a><a class="tag" href="https://mobilen.art/tags/template/">Template #1</a></div></div></footer></body></html>