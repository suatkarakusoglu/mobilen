<!-- Generated from 201205d on 2025-07-23 @ 10:58 with Emacs 31.0.50 (Org mode 9.7.11) -->
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="Mobilen - Suat Karakuşoğlu"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="icon" type="image/png" href="/img/favicon.png"/><link rel="alternative" type="application/rss+xml" title="Mobilen Yazılar" href="https://mobilen.art/rss/news.xml"/><link rel="stylesheet" href="https://mobilen.art/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="https://mobilen.art/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="https://mobilen.art/css/code.css"/><link rel="stylesheet" href="https://mobilen.art/css/site.css"/><link rel="stylesheet" href="https://mobilen.art/css/code_highlighter_dark_theme.css"/><title>Subcomposelayout ile Content Ölçümü - Mobilen</title></head><body><header class="site-header"><div class="container"><div class="site-title"><h1>Mobilen</h1></div></div><div class="site-masthead"><div class="container"><nav class="nav"><a class="nav-link" href="/">Anasayfa</a> <a class="nav-link" href="/magazines/">Dergiler</a> <a class="nav-link" href="/news/">İçerikler</a> </nav></div></div></header><div class="container"><div class="site-post"><h1 class="site-post-title">Subcomposelayout ile Content Ölçümü</h1><a class="tag" href="https://mobilen.art/tags/android/">Android #11</a><a class="tag" href="https://mobilen.art/tags/yazılım/">Yazılım #38</a><p class="site-post-meta">4 min read | December  3, 2024</p><div id="content"><p>
<a href="https://linkedin.com/in/emir-k-516788215">Emir Kaya</a> yazdı.
</p>


<div id="org4c9330e" class="figure">
<p><img src="/img/subcomposelayout_content_cover.jpg" class="content-image" width="100%">
</p>
</div>
<h2><a id="i̇çerik" class="anchor" href="#i̇çerik">¶</a>İçerik</h2><div class="outline-text-2" id="text-orgc0bb8a5">
<p>
Merhabalar, bu yazımda <code>Subcomposelayout</code> yapısı ile herhangi bir contentin yükseklik ve genişlik değerlerini nasıl ölçebileceğimizi ve nasıl kullanabileceğimizi açık bir şekilde anlatmaya çalışacağım.
</p>

<p>
Öncelikle neden böyle bir ölçüm yapmaya ihtiyacım olduğunu anlatarak başlamak istiyorum.
</p>

<p>
Üzerinde çalıştığım bir bottomsheet’te yarım açılma oranının ilk başta açılması gereken contentin uzunluğu ile aynı olmalıydı.
</p>

<p>
Yani herhangi bir boşluk veya contentin az gözükme gibi bir durumu olmamalıydı. Bu sebepten dolayı kullanıcı etkileşime girip bottomsheet açılmadan önce açılması istenen içerik renderlanıp ölçülmeli ve ölçülen uzunluk değeri bottomsheet’in yarım açıldığındaki yüksekliğine verilmeliydi.
</p>

<p>
Ve bu içerik her defasında değişebilir bir içerik olduğu için her defasında farklı bir ölçüm yapılmalıydı. Bu sebepten dolayı böyle bir çözüme başvurdum çünkü ölçümü dinamik olarak farklı senaryolarak uygun bir şekilde yapmalıydım.
</p>

<p>
Bu noktada ölçümü Subcomposelayout ile yapmaya karar verdim ve bu doğrultuda bir ölçüm fonksiyonu oluşturdum.
</p>

<p>
Peki aslında Subcomposelayout nedir?
</p>
</div>
<h3><a id="subcomposelayout" class="anchor" href="#subcomposelayout">¶</a>Subcomposelayout</h3><div class="outline-text-3" id="text-org463937f">
<p>
Subcomposelayout aslında dinamik bir şekilde alt composable’ları yerleştirmemiz için var olan bir yapıdır. Daha anlaşılır bir şekilde açıklamak gerekirse, bir bileşenin yerleşimi başka bir bileşenin boyutlarına bağlıysa bu noktada Subcomposelayout kullanılabilir. Ve tabii ki bizim oluşturduğumuz senaryodaki gibi ölçüm yapmak için de kullanabiliriz.
</p>
</div>
<h3><a id="ölçüm-nasıl-yapılır-ve-nasıl-kullanılır" class="anchor" href="#ölçüm-nasıl-yapılır-ve-nasıl-kullanılır">¶</a>Ölçüm nasıl yapılır ve nasıl kullanılır?</h3><div class="outline-text-3" id="text-org7789d95">
<p>
Senaryoda da bahsettiğim gibi kullanıcı butona tıkladıktan sonra bottomsheet açılmadan önce contentimizin yüksekliği ölçülüyor.
</p>

<p>
Aslında buradaki mantık, kullanıcıya göstermeden contenti ekranda renderlatıp yüksekliğini alıyoruz ve bottomsheet’in içerisine veriyoruz.
</p>

<p>
Bu işlemi yapabilmek için MeasuredContentHeight olarak isimlendirdiğim bir composable fonksiyon oluşturdum ve içerisinde aşağıda olduğu gibi bu fonksiyon içerisinde Subcomposablelayout kullanıyoruz.
</p>

<div class="highlight"><pre><span></span><span class="w">  </span><span class="nd">@Composable</span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nf">MeasuredContentHeight</span><span class="p">(</span><span class="n">onHeightMeasured</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">Float</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">Unit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">SubcomposeLayout</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">constraints</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="kd">val</span><span class="w"> </span><span class="nv">placeables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subcompose</span><span class="p">(</span><span class="s">&quot;content&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="n">NotExpandedContent</span><span class="p">()</span>
<span class="w">          </span><span class="p">}.</span><span class="na">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">measure</span><span class="p">(</span><span class="n">constraints</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="w">          </span><span class="kd">val</span><span class="w"> </span><span class="nv">totalHeightPx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">placeables</span><span class="p">.</span><span class="na">sumOf</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">height</span><span class="w"> </span><span class="p">}</span>
<span class="w">          </span><span class="kd">val</span><span class="w"> </span><span class="nv">totalHeightDp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">totalHeightPx</span><span class="p">.</span><span class="na">toDp</span><span class="p">()</span>

<span class="w">          </span><span class="n">onHeightMeasured</span><span class="p">(</span><span class="n">totalHeightDp</span><span class="p">.</span><span class="na">value</span><span class="p">)</span>

<span class="w">          </span><span class="n">layout</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">){}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>

<p>
Öncelikle ölçüm fonksiyonumuzu oluştururken ölçtüğümüz değeri dışarıya verebilmek için parametre oalrak onHeightMeasured adında bir callback tanımlıyoruz. Bu callback’e fonksiyonun devamında ölçtüğümüz değeri vereceğiz.
</p>

<p>
Daha sonra Subcomposelayout’ımızı oluşturuyoruz. “placables” adında bir subcompose oluşturuyoruz ve içerisine ölçmek istediğimiz composable’ı yerleştiriyoruz. Senaryomuzda bottomsheet’in tam açılmadığı andaki içeriği ölçmek istediğimiz için oluşturduğum “NotExpandedContent()” composable fonksiyonunu yerleştiriyorum.
</p>

<p>
Sonrasında ölçümümüzü gerçekleştirebilmek için “.map” koleksiyon fonksiyonunu kullanıyoruz: “.map { it.measure(constraints) }” . Bu sayede subcompose’a yerleştirdiğimiz tüm içerikler ölçülür ve bir listeye yerleştirilir.
</p>

<p>
Bu senaryoda yalnızca yüksekliğe ihtiyacımız olduğu için fonksiyonun devamında “height” değerini piksel cinsinden hesaplıyorum ve totalHeightPx değerine atıyorum. Daha sonrasında bu değeri “.toDp()”’yi kullanarak DP cinsine dönüştürüyorum ve “totalHeightDp” değerine atıyorum.
</p>

<p>
Fonksiyonun devamında yaptığımız ölçümü en başta oluşturduğumuz parametreye atıyorum. Bu sayede istediğimiz zaman bu değere dışarıdan erişebileceğiz.
</p>

<p>
Bana kalırsa bu fonksiyonun en can alıcı kısmı son kısmı yani “layout(0, 0){}” bu kısım. layout ile Subcomposelayout’ımızı yerleştiriyoruz. layout bizden height ve width değerleri bekliyor.
</p>

<p>
Biz bu senaryoda ikisine de 0 değerini vererek ekrana çizdirmemesini ancak ölçüm için renderlamasını sağlıyoruz. Yani bu kısım bu fonksiyonun sadece ölçüm yapmak için kullanıldığı anlamına geliyor.
</p>

<p>
Bu yazımda sizlere Subcomposelayout kullanarak composable content’lerin yükseklik ve genişliklerini nasıl ölçebileceğimizi olabildiğince anlaşılır bir şekilde anlatmaya çalıştım.
</p>

<p>
Umarım faydalı olmuştur. Okuduğunuz için teşekkür ederim.
</p>
</div>
</div></div></div><footer class="site-footer"><div class="container"><div class="row"><div class="column"><p><a href="https://mobilen.art/credits/">Atıflar</a> · <a rel="me" href="https://tr.linkedin.com/in/suat-karakusoglu">s13u</a></p><p>© 2023-2024 Mobilen</p></div><div class="column align-right"><p><a href="https://github.com/suatkarakusoglu/mobilen"><img src="https://mobilen.art/img/site_github_icon.png" style="width: 80px" alt="Github'da Katkıda Bulun"/></a></p></div></div></div><div class="container"><div class="row site-footer-tags"><a class="tag" href="https://mobilen.art/tags/yazılım/">Yazılım #38</a><a class="tag" href="https://mobilen.art/tags/ios/">iOS #29</a><a class="tag" href="https://mobilen.art/tags/araçlar/">Araçlar #11</a><a class="tag" href="https://mobilen.art/tags/android/">Android #11</a><a class="tag" href="https://mobilen.art/tags/apple/">Apple #9</a><a class="tag" href="https://mobilen.art/tags/tasarım/">Tasarım #8</a><a class="tag" href="https://mobilen.art/tags/xcode/">Xcode #6</a><a class="tag" href="https://mobilen.art/tags/kitap/">Kitap #5</a><a class="tag" href="https://mobilen.art/tags/swiftui/">SwiftUI #4</a><a class="tag" href="https://mobilen.art/tags/terminal_komutları/">Terminal Komutları #4</a><a class="tag" href="https://mobilen.art/tags/android_studio/">Android Studio #3</a><a class="tag" href="https://mobilen.art/tags/tüyo/">Tüyo #3</a><a class="tag" href="https://mobilen.art/tags/wwdc/">WWDC #2</a><a class="tag" href="https://mobilen.art/tags/swift/">Swift #2</a><a class="tag" href="https://mobilen.art/tags/belgesel/">Belgesel #2</a><a class="tag" href="https://mobilen.art/tags/flutter/">Flutter #2</a><a class="tag" href="https://mobilen.art/tags/kurulum/">Kurulum #2</a><a class="tag" href="https://mobilen.art/tags/haber/">Haber #2</a><a class="tag" href="https://mobilen.art/tags/güvenlik/">Güvenlik #1</a><a class="tag" href="https://mobilen.art/tags/biyografi/">Biyografi #1</a><a class="tag" href="https://mobilen.art/tags/ürün_yönetimi/">Ürün Yönetimi #1</a><a class="tag" href="https://mobilen.art/tags/i̇letişim/">İletişim #1</a><a class="tag" href="https://mobilen.art/tags/kotlin/">Kotlin #1</a><a class="tag" href="https://mobilen.art/tags/react/">React #1</a><a class="tag" href="https://mobilen.art/tags/prensip/">Prensip #1</a><a class="tag" href="https://mobilen.art/tags/test/">Test #1</a><a class="tag" href="https://mobilen.art/tags/carplay/">CarPlay #1</a><a class="tag" href="https://mobilen.art/tags/ai/">AI #1</a><a class="tag" href="https://mobilen.art/tags/template/">Template #1</a><a class="tag" href="https://mobilen.art/tags/debugging/">Debugging #1</a></div></div></footer></body></html>
