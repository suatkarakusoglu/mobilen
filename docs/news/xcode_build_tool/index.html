<!-- Generated from 26ea66e on 2024-10-15 @ 17:28 with Emacs 31.0.50 (Org mode 9.7.11) -->
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="Mobilen - Suat Karakuşoğlu"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="icon" type="image/png" href="/img/favicon.png"/><link rel="alternative" type="application/rss+xml" title="Mobilen Yazılar" href="https://mobilen.art/rss/news.xml"/><link rel="stylesheet" href="https://mobilen.art/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="https://mobilen.art/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="https://mobilen.art/css/code.css"/><link rel="stylesheet" href="https://mobilen.art/css/site.css"/><link rel="stylesheet" href="https://mobilen.art/css/code_highlighter_dark_theme.css"/><title>&ldquo;xcodebuild&rdquo; Komutları ve Kullanım Örnekleri - Mobilen</title></head><body><header class="site-header"><div class="container"><div class="site-title"><h1>Mobilen</h1></div></div><div class="site-masthead"><div class="container"><nav class="nav"><a class="nav-link" href="/">Anasayfa</a> <a class="nav-link" href="/magazines/">Dergiler</a> <a class="nav-link" href="/news/">İçerikler</a> </nav></div></div></header><div class="container"><div class="site-post"><h1 class="site-post-title">&ldquo;xcodebuild&rdquo; Komutları ve Kullanım Örnekleri</h1><a class="tag" href="https://mobilen.art/tags/ios/">iOS #26</a><a class="tag" href="https://mobilen.art/tags/yazılım/">Yazılım #36</a><a class="tag" href="https://mobilen.art/tags/araçlar/">Araçlar #9</a><a class="tag" href="https://mobilen.art/tags/xcode/">Xcode #5</a><p class="site-post-meta">14 min read | April  1, 2024</p><div id="content">
<div id="org5da32c6" class="figure">
<p><img src="/img/xcode_build_cover.jpg" class="content-image" width="100%">
</p>
</div>

<p>
<a href="https://www.linkedin.com/in/ugurcan-durak/">Uğurcan Durak</a> yazdı.
</p>
<h2><a id="i̇çerik" class="anchor" href="#i̇çerik">¶</a>İçerik</h2><div class="outline-text-2" id="text-org9809f8c">
<p>
Merhabalar, bu yazımda Xcode üzerinden yaptığımız bazı aksiyonların
(build, archive, test vb.) arka tarafta hangi terminal komutu olarak
çalıştığını ve bu komutların nerelerde kullanıldığına değineceğim.
Faydalı olması dileğiyle haydi başlayalım :)
</p>
</div>
<h3><a id="ne-yapacağız" class="anchor" href="#ne-yapacağız">¶</a>Ne Yapacağız?</h3><div class="outline-text-3" id="text-org3d3c70c">
<p>
En çok kullanılan ve ihtiyaç olabileceğini düşündüğüm komutları adım
adım açıklayarak örnekler vereceğim. Daha sonra, hangi süreçlerde
kullanabileceğimizi inceleyerek, local ortamda basit bir örnek üzerinden
nasıl uygulayabileceğimizi göstereceğim.
</p>
</div>
<h3><a id="ldquoxcodebuildrdquo-nedir" class="anchor" href="#ldquoxcodebuildrdquo-nedir">¶</a>&ldquo;xcodebuild&rdquo; Nedir?</h3><div class="outline-text-3" id="text-org3e326dc">
<p>
xcodebuild” komutu, Xcode&rsquo;un kullanıcı arayüzündeki (GUI) yapabildiğimiz
işlemleri terminal üzerinden gerçekleştirmemizi sağlar. Bu sayede build,
test ve dağıtım gibi süreçleri otomatize edebilir, kendi oluşturduğumuz
script&rsquo;ler ile projelerimizi komut satırı üzerinden yönetebiliriz.
</p>
</div>
<h3><a id="komutlar" class="anchor" href="#komutlar">¶</a>Komutlar</h3><div class="outline-text-3" id="text-orgb2a0b96">
<p>
xcodebuild, hedef configuration, scheme, cihaz, gibi bir çok parametreyi
destekler. Şimdi en çok kullanılan komutlara ve parametrelere değinip
örneklerine bakalım. Burada anlatacaklarımın dışındaki yeteneklerini
incelemek için terminalde <i>&ldquo;xcodebuild -help&rdquo;</i> yazarak daha detaylı
inceleyebilirsiniz.
</p>

<p>
Komutların kullanımı en temelinde, projenizin bir workspace veya bir
project olmasına göre değişiklik gösterir. Burada farklılık aslında
sadece proje tipini belirtmekle ilgili. Vereceğim örneklerde &ldquo;project&rdquo;
üzerinden devam ediyor olacağım eğer siz workspace bir proje
hedefliyorsanız &ldquo;project&rdquo; olan yerleri workspace olarak değiştirmeniz
yeterli. Aşağıda farklılığı anlamak için iki basit örnek ekliyorum.
</p>

<p>
Workspace
</p>

<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span>-workspace<span class="w"> </span>**ProjeAdı.xcworkspace**
</pre></div>

<p>
Project
</p>

<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span>-project<span class="w"> </span>**ProjeAdı.xcodeproj**
</pre></div>

<p>
Farkı anladığımıza göre sırasıyla komutları inceleyelim.
</p>
</div>
<h4><a id="build" class="anchor" href="#build">¶</a>Build</h4><div class="outline-text-4" id="text-orga811784">
<p>
Build, basit anlamda kaynak kodun derlenerek çalıştırılabilir program
dosyalarına dönüştürülmesi işlemi diyebiliriz. Xcode&rsquo;da üst menüden
<i>Product-&gt;Build</i> ile veya <i>&ldquo;command + B&rdquo;</i> tuş kombinasyonlarıyla build
işlemini başlatabiliriz.
</p>

<p>
Terminalde şu komut ile gerçekleştirilir;
</p>

<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span>-project<span class="w"> </span>ProjeAdı.xcodeproj<span class="w"> </span>-scheme<span class="w"> </span>ŞemaAdı<span class="w"> </span>-destination<span class="w"> </span><span class="s2">&quot;platform=iOS Simulator,name=iPhone 15&quot;</span>
</pre></div>

<p>
Daha önceden de belirttiğim gibi <i>&ldquo;xcodebuild&rdquo;</i> komutu bir çok parametre
destekler. Build almak istediğimiz şemayı, hedef cihaz modeli ve işletim
sistemini belirtebiliriz. Aynı zamanda &ldquo;<i>configuration</i>&rdquo; parametresi
ekleyerek <i>Debug</i> ya da <i>Release</i> olarak build almasını sağlayabiliriz.
</p>

<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span>-project<span class="w"> </span>XcodeBuildCommands.xcodeproj<span class="w"> </span>-scheme<span class="w"> </span>XcodeBuildCommands<span class="w"> </span>-destination<span class="w"> </span><span class="s2">&quot;platform=iOS Simulator,name=iPhone 15,OS=latest&quot;</span>
</pre></div>

<p>
Herhangi bir configuration eklemezsek default olarak <i>Debug</i> modda build
gerçekleşir.
</p>
</div>
<h4><a id="archive-oluşturma" class="anchor" href="#archive-oluşturma">¶</a>Archive Oluşturma</h4><div class="outline-text-4" id="text-org7e14b6e">
<p>
Archive, projenin kaynak kodunu ve gerekli olan tüm dosyaları tek bir
pakette birleştirme işlemidir. <i>Ipa</i> oluşturabilmek için gerekli bir
adımdır. Xcode&rsquo;da üst menüden Product-&gt;archive ile işlemi
başlatabiliriz.
</p>

<p>
Terminalde şu komutla gerçekleştirilir;
</p>

<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span>archive<span class="w"> </span>-project<span class="w"> </span>ProjeAdı.xcodeproj<span class="w"> </span>-scheme<span class="w"> </span>ŞemaAdınız<span class="w"> </span>-archivePath<span class="w"> </span>Yolunuz/ArşivAdı.xcarchive
</pre></div>

<p>
Burada isteğe ve ihtiyaca göre kullanabileceğiniz bazı parametreler
mevcut. Bu parametrelere kısaca değinelim.
</p>

<p>
<b>configuration</b>: Projenin hangi yapılandırma ile archive alınacağını
belirtiyoruz. Custom bir yapınız yoksa default olarak <i>&ldquo;Debug&rdquo; ve
&ldquo;Release&rdquo;</i> olarak iki seçenek vardır.
</p>

<p>
<b>CODE_SIGN_IDENTITY</b>: Hangi tür
sertifikayla <i>(Developer, Distribution)</i> archive alacağımızı
belirtiyoruz.
</p>

<p>
<b>PROVISIONING_PROFILE</b>: Burada ise hangi tür profile&rsquo;ile
(<i>App Store, Ad hoc, Enterprise, Development)</i> archive alacağımızı
belirtiyoruz.
</p>

<p>
Bu parametrelerden herhangi birini belirtmezsen default olarak xcode
üzerindeki ayarları uygulacaktır.
</p>
</div>
<h4><a id="ipa-oluşturma" class="anchor" href="#ipa-oluşturma">¶</a>IPA Oluşturma</h4><div class="outline-text-4" id="text-org54196a9">
<p>
Ipa oluşturmak, projemizin son halini cihazlarda çalıştırılabilir hale
getirdiğimiz adımdır. Bu adımda daha öncesinde oluşturduğumuz archive&rsquo;ı
kullanılır ve işlemin sonunda <i>.ipa</i> uzantılı bir dosya üretilir.
</p>

<p>
Komuta geçmeden önce ihtiyacımız olan <i>&ldquo;exportOptions&rdquo;</i> dosyamızı
oluşturmamız gerekiyor. Bu dosya içerisinde oluşturacağımız <i>ipa</i>&rsquo;nın
nasıl ve hangi amaçla oluşacağını belirtiyoruz.
</p>

<p>
Dosyayı oluşturmak için, Xcode üzerinden oluşturmak istediğimiz folder&rsquo;a
sağ tıklayıp <i>&ldquo;New File&rdquo;</i> diyerek açılan pencerede /&ldquo;Property List&rdquo; /i
seçiyoruz. Dosyayı oluşturduktan sonra aşağıdaki gibi dolduruyoruz.
</p>


<div id="org22a26fd" class="figure">
<p><img src="/img/export_options.jpg" class="content-image" width="100%">
</p>
</div>

<p>
Source Code görünümü:
</p>
<div class="highlight"><pre><span></span><span class="w">  </span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="w">  </span><span class="cp">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
<span class="w">  </span><span class="nt">&lt;plist</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;dict&gt;</span>
<span class="w">      </span><span class="nt">&lt;key&gt;</span>method<span class="nt">&lt;/key&gt;</span>
<span class="w">      </span><span class="nt">&lt;string&gt;</span>app-store<span class="nt">&lt;/string&gt;</span>
<span class="w">      </span><span class="nt">&lt;key&gt;</span>provisioningProfiles<span class="nt">&lt;/key&gt;</span>
<span class="w">      </span><span class="nt">&lt;dict&gt;</span>
<span class="w">        </span><span class="nt">&lt;key&gt;</span>com.xxx.test<span class="nt">&lt;/key&gt;</span>
<span class="w">        </span><span class="nt">&lt;string&gt;</span>ProvisingProfileName<span class="nt">&lt;/string&gt;</span>
<span class="w">        </span><span class="nt">&lt;key&gt;</span>com.xxx.test.NotificationService<span class="nt">&lt;/key&gt;</span>
<span class="w">        </span><span class="nt">&lt;string&gt;</span>ProvisingProfileNameForNotificationService<span class="nt">&lt;/string&gt;</span>
<span class="w">      </span><span class="nt">&lt;/dict&gt;</span>
<span class="w">      </span><span class="nt">&lt;key&gt;</span>signingCertificate<span class="nt">&lt;/key&gt;</span>
<span class="w">      </span><span class="nt">&lt;string&gt;</span>Apple<span class="w"> </span>Distribution<span class="nt">&lt;/string&gt;</span>
<span class="w">      </span><span class="nt">&lt;key&gt;</span>signingStyle<span class="nt">&lt;/key&gt;</span>
<span class="w">      </span><span class="nt">&lt;string&gt;</span>manual<span class="nt">&lt;/string&gt;</span>
<span class="w">      </span><span class="nt">&lt;key&gt;</span>teamID<span class="nt">&lt;/key&gt;</span>
<span class="w">      </span><span class="nt">&lt;string&gt;</span>YoutTeamID<span class="nt">&lt;/string&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dict&gt;</span>
<span class="w">  </span><span class="nt">&lt;/plist&gt;</span>
</pre></div>


<div id="org2147eb5" class="figure">
<p><img src="/img/export_option_plist.jpg" class="content-image" width="100%">
</p>
<p><span class="figure-number">Figure 1: </span>Property List görünümü</p>
</div>
</div>
<h3><a id="exportoptions-fieldrsquoların-tanımı" class="anchor" href="#exportoptions-fieldrsquoların-tanımı">¶</a>ExportOptions Field&rsquo;ların Tanımı</h3><div class="outline-text-3" id="text-org3ee1eff">
<p>
Şimdi eklediğimiz değerlerin ne anlama geldiğine bakalım.
</p>

<dl class="org-dl">
<dt><b>method</b></dt><dd>Hangi türde dağıtım yapacağımızı belirttiğimiz parametre</dd>
</dl>
<p>
<i>(app-store, ad-hoc, enterprise, development)</i>
</p>

<dl class="org-dl">
<dt><b>signingStyle</b></dt><dd></dd>
</dl>
<p>
İmzalamayı otomatik mi yoksa manuel mi yapacağımızı belirttiğimiz
parametre.
</p>

<dl class="org-dl">
<dt><b>signingCertificate</b></dt><dd>İmza için hangi tür sertifika</dd>
</dl>
<p>
kullanacağımızı belirttiğimiz parametre. <i>(Apple Distribution, Apple
Developer)</i>
</p>

<dl class="org-dl">
<dt><b>provisioning profiles</b></dt><dd>Dağıtım yapacağımız türe ait</dd>
</dl>
<p>
provisioning profile ismini belirtiyoruz. Eğer projenizde ek olarak
<i>NotificationService</i> target&rsquo;ınız varsa bunun için ayrıca profile
belirtmemiz gerekiyor. Bu durumu sizler için <i>&ldquo;exportOptions&rdquo;</i> dosyasına
örnek olarak ekledim :)
</p>

<dl class="org-dl">
<dt><b>teamID</b></dt><dd>teamID&rsquo;mizi belirttiğimiz parametre.</dd>
</dl>
<p>
Her takımın kendine ait sertifikaları, provisioning profile&rsquo;ları
bulunduğundan uygulamanın hangi takım için imzalanacağını belirtmiş
oluyoruz.
</p>

<p>
Genel anlamda önemli gördüğüm alanları belirttim. Burada olmayan bir çok
parametre mevcut. İhtiyaç ve isteğe göre bu alanları
düzenleyebilirsiniz.
</p>

<p>
Terminalde şu kodu çalıştırarak <i>ipa</i> oluşturma işlemini başlatabiliriz;
</p>

<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span>-exportArchive<span class="w"> </span>-archivePath<span class="w"> </span>OluşturulmuşArchiveYolu/ArchiveAdı.xcarchive<span class="w"> </span>-exportPath<span class="w"> </span>ExportEdilecekIpaYolu<span class="w"> </span>-exportOptionsPlist<span class="w"> </span>ExportOptionsFileYolu
</pre></div>

<p>
Komut içerisinde ihtiyacımız olanlar; - Bir önceki adımda oluşturduğumuz
archive path&rsquo;i ve ismi - Oluşturmuş olduğumuz “exportOptions” dosyanın
path&rsquo;i - Ipa&rsquo;nın oluşturulacağı yol
</p>

<p>
Bunları komuta ekleyerek <i>ipa</i> oluşturma işlemini başlatabiliriz.
</p>
</div>
<h3><a id="test-süreci" class="anchor" href="#test-süreci">¶</a>Test Süreci</h3><div class="outline-text-3" id="text-orgdf2ff8f">
<p>
Test, projemizin beklediğimiz gibi çalışıp çalışmadığını kontrol etmek
için kullanılır. Herhangi bir ekranda veya bir akışta problem olup
olmadığını ilgili testi çalıştırıp tespit edebiliriz. Xcode&rsquo;üzerinde
command + U kısayolu veya üst menüden Product-&gt;test ile
çalıştırabiliriz. Komut ile nasıl yaparız hangi özellikleri
kullanabiliriz ona bakalım.
</p>

<p>
Terminalde şu komutla gerçekleştirilir;
</p>

<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-project<span class="w"> </span>ProjeAdı.xcodeproj<span class="w"> </span>-scheme<span class="w"> </span>ŞemaAdı<span class="w"> </span>-destination<span class="w"> </span><span class="s2">&quot;name=iPhone 15,OS=latest&quot;</span>
</pre></div>

<p>
<i>&ldquo;destination&rdquo;</i> kısmında testi çalıştırmak istediğimiz simulator&rsquo;ü
yazıyoruz.
</p>

<p>
Komut çalıştırıldıktan sonra, öncelikle projenin build işlemi
gerçekleşir ve ardından projedeki hem Unit hem de UI testlerini (UI Test
Xcode üzerinden devre dışı bırakılmadıysa) çalıştırmaya başlar. Bu
süreçte, testler üzerinde çeşitli özelleştirmeler yapabiliriz. Örneğin,
yalnızca Unit testlerin çalıştırılması, belirli bir test sınıfının ya da
sınıf içindeki spesifik bir test fonksiyonunun çalıştırılması gibi.
</p>

<p>
Yalnız Unit Test&rsquo;lerin çalıştırılması: <i>&ldquo;-skip&rdquo;</i> ardından
<i>&ldquo;-testing&rdquo;</i> parametrelerini ekleyerek sonuna UI test target adımızı
giriyoruz. Target adımıza aşağıdaki resimdeki gibi TARGETS bölümünden
öğrenebiliriz.
</p>


<div id="orge99496e" class="figure">
<p><img src="/img/xcode_build_skip_test.jpg" class="content-image" width="100%">
</p>
</div>

<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-project<span class="w"> </span>ProjeAdı.xcodeproj<span class="w"> </span>-scheme<span class="w"> </span>ŞemaAdı<span class="w"> </span>-destination<span class="w"> </span><span class="s2">&quot;name=iPhone 15,OS=17.2&quot;</span><span class="w"> </span>-skip-testing:UITestTargetAdı
</pre></div>

<p>
Bu komutu çalıştırdığımızda UI testleri haricinde tüm testler
çalışacaktır.
</p>

<p>
Spesifik bir sınıfın veya fonksiyonun test edilmesi: Bir önceki
örnekte <i>&ldquo;-skip&rdquo;</i> parametresini eklemiştik şimdi ise <i>&ldquo;-only&rdquo;</i>
parametresini ekliyoruz. Parametreleri ekledikten sonra çalıştırmak
istediğimiz test sınıfını ya da fonksiyonu yazıyoruz.
</p>

<p>
Daha iyi anlamak adına basit bir “/CalculatorTest”/ sınıfı üzerinden
örneklere bakalım.
</p>

<div class="highlight"><pre><span></span>  <span class="kd">import</span> <span class="nc">XCTest</span>
  <span class="p">@</span><span class="n">testable</span> <span class="kd">import</span> <span class="nc">XcodeBuildCommands</span>

  <span class="kr">final</span> <span class="kd">class</span> <span class="nc">CalculatorTest</span><span class="p">:</span> <span class="n">XCTestCase</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nv">calculator</span><span class="p">:</span> <span class="n">CalculatorHelper</span><span class="p">!</span>
      <span class="kr">override</span> <span class="kd">func</span> <span class="nf">setUpWithError</span><span class="p">()</span> <span class="kr">throws</span> <span class="p">{</span>
          <span class="n">calculator</span> <span class="p">=</span> <span class="p">.</span><span class="n">shared</span>
      <span class="p">}</span>

      <span class="kr">override</span> <span class="kd">func</span> <span class="nf">tearDownWithError</span><span class="p">()</span> <span class="kr">throws</span> <span class="p">{</span>

      <span class="p">}</span>

      <span class="kd">func</span> <span class="nf">test_calculate</span><span class="p">()</span> <span class="kr">throws</span> <span class="p">{</span>
          <span class="kd">let</span> <span class="nv">val1</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">5</span>
          <span class="kd">let</span> <span class="nv">val2</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">10</span>
          <span class="kd">let</span> <span class="nv">expected</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">15</span>

          <span class="kd">let</span> <span class="nv">result</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">calculator</span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">)</span>

          <span class="n">XCTAssertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
      <span class="p">}</span>

      <span class="kd">func</span> <span class="nf">test_multiply</span><span class="p">()</span> <span class="kr">throws</span> <span class="p">{</span>
          <span class="kd">let</span> <span class="nv">val1</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">5</span>
          <span class="kd">let</span> <span class="nv">val2</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">10</span>
          <span class="kd">let</span> <span class="nv">expected</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">50</span>

          <span class="kd">let</span> <span class="nv">result</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">calculator</span><span class="p">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">)</span>

          <span class="n">XCTAssertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
      <span class="p">}</span>
  <span class="p">}</span>
</pre></div>

<p>
Yalnızca <i>CalculatorTest</i>&rsquo;i çalıştırmak istersek,
</p>
<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-project<span class="w"> </span>XcodeBuildCommands.xcodeproj<span class="w"> </span>-scheme
<span class="w">  </span>XcodeBuildCommands<span class="w"> </span>-destination<span class="w"> </span><span class="s2">&quot;name=iPhone 15,OS=17.2&quot;</span>
<span class="w">  </span>-only-testing:XcodeBuildCommandsTests/CalculatorTest
</pre></div>

<p>
Sonuç,
<img src="/img/xcodebuild_test_calculator.jpg" class="content-image" width="100%">
</p>

<p>
CalculatorTest sınıfındaki bir test fonksiyonunu çalıştırmak istersek,
</p>
<div class="highlight"><pre><span></span><span class="w">  </span>xcodebuild<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-project<span class="w"> </span>XcodeBuildCommands.xcodeproj<span class="w"> </span>-scheme
<span class="w">  </span>XcodeBuildCommands<span class="w"> </span>-destination<span class="w"> </span><span class="s2">&quot;name=iPhone 15,OS=17.2&quot;</span>
<span class="w">  </span>-only-testing:XcodeBuildCommandsTests/CalculatorTest/test_calculate
</pre></div>


<div id="orge5a0804" class="figure">
<p><img src="/img/xcodebuild_test_only_function.jpg" class="content-image" width="100%">
</p>
</div>

<p>
Görüldüğü üzere sadece <i>test_calculate()</i> fonksiyonu çalıştı.
</p>

<p>
Temel mantığı anlamak amacıyla birkaç senaryo için örnekler ekledim.
Bundan sonrası sizin ihtiyaçlarınıza ve gereksinimlerinize bağlı olarak
değişiklik gösterebilir.
</p>
</div>
<h3><a id="ldquoxcodebuildrdquo-komutlarının-çeşitli-kullanım-senaryoları" class="anchor" href="#ldquoxcodebuildrdquo-komutlarının-çeşitli-kullanım-senaryoları">¶</a>&ldquo;xcodebuild&rdquo; Komutlarının Çeşitli Kullanım Senaryoları</h3><h4><a id="otomasyon-pipeline-süreçleri" class="anchor" href="#otomasyon-pipeline-süreçleri">¶</a>Otomasyon Pipeline Süreçleri</h4><div class="outline-text-4" id="text-orgfccfe2d">
<p>
En yaygın kullanım alanlarından biri, Jenkins gibi platformlarda build,
test, archive ve ipa oluşturma süreçlerini otomatize etmektir. Jenkins,
sürekli entegrasyon ve sürekli dağıtım (CI/CD) süreçlerinde merkezi bir
rol oynar. Bu araç, projenin düzenli olarak derlenmesini, testlerin
çalıştırılmasını ve uygulamanın dağıtımının yapılmasını sağlar, böylece
manuel müdahale gereksinimini azaltır.
</p>

<p>
Aynı zamanda <i>Fastlane</i> otomasyon programı arka tarafta xcodebuild
komutlarını kullanır. Fastlane işlemi sırasında loglara detaylı bakarsak
xcodebuild komutlarını görebiliriz. Örnek olması açısından aşağıya
ekliyorum;
</p>

<div class="highlight"><pre><span></span><span class="w">  </span>Resolving<span class="w"> </span>Swift<span class="w"> </span>Package<span class="w"> </span>Manager<span class="w"> </span>dependencies...
<span class="w">  </span>xcodebuild<span class="w"> </span>-resolvePackageDependencies<span class="w"> </span>-scheme<span class="w"> </span>XXX<span class="w"> </span>-project<span class="w"> </span>./XXX.xcodeproj

<span class="w">  </span>xcodebuild<span class="w"> </span>-showBuildSettings<span class="w"> </span>-scheme<span class="w"> </span>XXX<span class="w"> </span>-project<span class="w"> </span>./XXX.xcodeproj<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="w">  </span>Detected<span class="w"> </span>provisioning<span class="w"> </span>profile<span class="w"> </span>mapping:<span class="w"> </span><span class="o">{</span>:<span class="s2">&quot;com.xxx.xxx&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;match AppStore com.xxx.xxx&quot;</span>,<span class="w"> </span>:<span class="s2">&quot;com.xxx.xxx.NotificationService&quot;</span><span class="o">=</span>&gt;<span class="s2">&quot;match AppStore com.xxx.xxx.NotificationService&quot;</span><span class="o">}</span>

<span class="w">  </span>XXX/fastlane/2.219.0_2/libexec/gems/fastlane-2.219.0/gym/lib/assets/wrap_xcodebuild/xcbuild-safe.sh<span class="w"> </span>-exportArchive<span class="w"> </span>-exportOptionsPlist<span class="w"> </span><span class="s1">&#39;/var/folders/xn/_f_jvlhx113805tyb7xpsz4c0000gn/T/gym_config20240312-10649-j54z7f.plist&#39;</span><span class="w"> </span>-archivePath<span class="w"> </span>/Users/XXX/Library/Developer/Xcode/Archives/2024-03-12/Tami<span class="se">\ </span>Alpha<span class="se">\ </span><span class="m">2024</span>-03-12<span class="se">\ </span><span class="m">13</span>.39.16.xcarchive<span class="w"> </span>-exportPath<span class="w"> </span><span class="s1">&#39;/var/folders/xn/_f_jvlhx113805tyb7xpsz4c0000gn/T/gym_output20240312-10649-pgtuac&#39;</span>
</pre></div>
</div>
<h3><a id="local-ortamda-otomasyon-i̇şlemleri" class="anchor" href="#local-ortamda-otomasyon-i̇şlemleri">¶</a>Local Ortamda Otomasyon İşlemleri</h3><div class="outline-text-3" id="text-orgc9c4bb0">
<p>
Jenkins gibi araçların yanı sıra, local geliştirme ortamımızda da
“/xcodebuild”/ komutlarını kullanarak kendimize özel otomasyonlar
oluşturabiliriz. Örnek olarak, test çalıştırıp sonucunda “/Slather”/
aracı ile rapor oluşturma sürecini otomatize etmeye çalışalım. Xcode&rsquo;da
bu işlemi adım adım yapmak yerine, tek bir komutla hızlıca
tamamlayabiliriz. Peki nasıl yaparız?
</p>

<p>
Öncelikle projemizin bulunduğu dizinde <i>&ldquo;Makefile&rdquo;</i> adında bir dosya
oluşturarak başlayalım. Makefile, belirli komutları ve iş akışlarını
tanımlayarak tekrar eden görevleri otomatize etmemizi sağlar. Şimdi, bu
Makefile içerisine ekleyeceğimiz kodları inceleyelim.
</p>

<ul class="org-ul">
<li><p>
Test çalıştırmak için aşağıdaki kodu ekliyoruz
</p>
<div class="highlight"><pre><span></span><span class="w">    </span><span class="o">(</span>xcodebuild<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-project<span class="w"> </span>XcodeBuildCommands.xcodeproj<span class="w"> </span>-scheme
<span class="w">     </span>XcodeBuildCommands<span class="w"> </span>-destination<span class="w"> </span><span class="s2">&quot;name=iPhone 15,OS=17.2&quot;</span>
<span class="w">     </span>-skip-testing:XcodeBuildCommandsUITests<span class="o">)</span>
</pre></div></li>
</ul>

<p>
UI testleri dahil etmek istemediğimden &ldquo;<i>-skip</i>&rdquo; komutu ile ignore
ediyorum.
</p>
</div>
<h3><a id="xcode-problemleriyle-başa-çıkmak" class="anchor" href="#xcode-problemleriyle-başa-çıkmak">¶</a>Xcode Problemleriyle Başa Çıkmak</h3><div class="outline-text-3" id="text-org9864541">
<p>
<i>&ldquo;xcodebuild&rdquo;</i> komutları, otomasyon süreçlerinin yanı sıra Xcode ile
ilgili karşılaşılan hataların çözümünde de faydalı olabilir. Örneğin
bazı durumlarda, özellikle bir branch değiştirme veya birleştirme
(merge) işlemi sonrasında Xcode beklenmedik bir şekilde kapanıp tekrar
açıldığında build alamayıp kapanabiliyor. Bu gibi durumlarda, terminal
üzerinden build almak Xcode&rsquo;un yeniden düzgün bir şekilde çalışmasını
sağlar ve geliştirme sürecinizin kesintiye uğramasını önler.
</p>
</div>
<h3><a id="son-olarak" class="anchor" href="#son-olarak">¶</a>Son olarak</h3><div class="outline-text-3" id="text-orgc6e1b3e">
<p>
Elimden geldiğince çoğu komutu açıklayıp örnekler vermeye çalıştım.
Umarım sizler için faydalı olur. Okuduğunuz ve vakit ayırdığınız için
teşekkürler :)
</p>
</div>
<h3><a id="kaynakça" class="anchor" href="#kaynakça">¶</a>Kaynakça</h3><div class="outline-text-3" id="text-org9572a9b">
<ul class="org-ul">
<li><a href="https://developer.apple.com/library/archive/technotes/tn2339/_index.html">Building from the Command Line with Xcode FAQ</a></li>
<li><a href="https://medium.com/trendyol-tech/building-an-ios-distribution-pipeline-local-poc-with-command-line-tools-part-1-d9f443c7dbb5">Building an iOS Distribution Pipeline</a></li>
<li><a href="https://m2pfintech.com/blog/ci-cd-pipeline-for-ios-build-generation-using-jenkins/">Pipeline for iOS build generation using Jenkins</a></li>
</ul>
</div>
</div></div></div><footer class="site-footer"><div class="container"><div class="row"><div class="column"><p><a href="https://mobilen.art/credits/">Atıflar</a> · <a rel="me" href="https://tr.linkedin.com/in/suat-karakusoglu">s13u</a></p><p>© 2023-2024 Mobilen</p></div><div class="column align-right"><p><a href="https://github.com/suatkarakusoglu/mobilen"><img src="https://mobilen.art/img/site_github_icon.png" style="width: 80px" alt="Github'da Katkıda Bulun"/></a></p></div></div></div><div class="container"><div class="row site-footer-tags"><a class="tag" href="https://mobilen.art/tags/yazılım/">Yazılım #36</a><a class="tag" href="https://mobilen.art/tags/ios/">iOS #26</a><a class="tag" href="https://mobilen.art/tags/araçlar/">Araçlar #9</a><a class="tag" href="https://mobilen.art/tags/apple/">Apple #9</a><a class="tag" href="https://mobilen.art/tags/android/">Android #9</a><a class="tag" href="https://mobilen.art/tags/tasarım/">Tasarım #7</a><a class="tag" href="https://mobilen.art/tags/xcode/">Xcode #5</a><a class="tag" href="https://mobilen.art/tags/kitap/">Kitap #5</a><a class="tag" href="https://mobilen.art/tags/swiftui/">SwiftUI #4</a><a class="tag" href="https://mobilen.art/tags/terminal_komutları/">Terminal Komutları #4</a><a class="tag" href="https://mobilen.art/tags/android_studio/">Android Studio #3</a><a class="tag" href="https://mobilen.art/tags/tüyo/">Tüyo #3</a><a class="tag" href="https://mobilen.art/tags/wwdc/">WWDC #2</a><a class="tag" href="https://mobilen.art/tags/swift/">Swift #2</a><a class="tag" href="https://mobilen.art/tags/belgesel/">Belgesel #2</a><a class="tag" href="https://mobilen.art/tags/flutter/">Flutter #2</a><a class="tag" href="https://mobilen.art/tags/haber/">Haber #2</a><a class="tag" href="https://mobilen.art/tags/güvenlik/">Güvenlik #1</a><a class="tag" href="https://mobilen.art/tags/biyografi/">Biyografi #1</a><a class="tag" href="https://mobilen.art/tags/ürün_yönetimi/">Ürün Yönetimi #1</a><a class="tag" href="https://mobilen.art/tags/i̇letişim/">İletişim #1</a><a class="tag" href="https://mobilen.art/tags/kotlin/">Kotlin #1</a><a class="tag" href="https://mobilen.art/tags/react/">React #1</a><a class="tag" href="https://mobilen.art/tags/carplay/">CarPlay #1</a><a class="tag" href="https://mobilen.art/tags/ai/">AI #1</a><a class="tag" href="https://mobilen.art/tags/template/">Template #1</a><a class="tag" href="https://mobilen.art/tags/debugging/">Debugging #1</a></div></div></footer></body></html>
